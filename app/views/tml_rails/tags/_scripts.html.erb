<% if Tml.config.enabled? %>
  <style type="text/css">
    .tml_fltr {<%=tml_style_attribute_tag('float', 'right')%> !important;}
    .tml_fltl {<%=tml_style_attribute_tag('float', 'left')%> !important;}
    .tml_txtr {<%=tml_style_attribute_tag('text-align', 'right')%> !important;}
    .tml_txtl {<%=tml_style_attribute_tag('text-align', 'left')%> !important;}
    <%= tml_application.css %>
  </style>

  <% if tml_session.tools_enabled? %>
    <script>
      (function() {
        if (window.tml_already_initialized) return;
        window.tml_already_initialized = true;

        var script = window.document.createElement('script');
        script.setAttribute('id', 'tml-tools');
        script.setAttribute('type', 'application/javascript');
        script.setAttribute('src', '<%= tml_application.tools['javascript'] %>');
        script.setAttribute('charset', 'UTF-8');
        script.onload = function() {
          Tml.Utils.insertCSS(window.document, "<%= tml_application.tools['stylesheet'] %>", false);
          Tml.app_key = '<%= tml_application.key %>';
          Tml.host = '<%= tml_application.tools['host'] %>';
          Tml.locale = '<%= tml_current_language.locale %>';
          Tml.sources = [];
          <%
            if tml_application.feature_enabled?(:shortcuts)
               tml_application.shortcuts.each do |key, script|
          %>
          shortcut.add('<%=key.html_safe%>', function() {<%= script.html_safe %>});
          <%
               end
            end
          %>
          if (typeof(tml_on_ready) === 'function') {
            tml_on_ready();
          }
        };
        window.document.getElementsByTagName('head')[0].appendChild(script);
      })();
    </script>
  <% end %>
<% end %>